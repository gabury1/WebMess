<!DOCTYPE html>
<html lang="kor">
    <head>

        <meta charset="utf-8">

        <!--JQuery-->
        <script
        src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"
        integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer"></script>

        <!--SockJS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.6.1/sockjs.min.js"
                integrity="sha512-1QvjE7BtotQjkq8PxLeF6P46gEpBRXuskzIVgjFpekzFVF4yjRgrQvTG1MTOJ3yQgvTteKAcO7DSZI92+u/yZw=="
                crossorigin="anonymous" referrerpolicy="no-referrer"></script>

        <link rel="stylesheet" type="text/css" href="/css/private/private.css">
        <link rel="stylesheet" type="text/css" href="/css/private/friend.css">


    </head>
    <body>

    <div id="side_bar">
        <h2>
          <a href="/" style="color:black">WM</a>
        </h1>
        <ul id="menu">
            <li class="menu_item" onclick="friendMode()">Friend</li>
            <li class="menu_item" onclick="chatMode()">Chat</li>
        </ul>
    </div>
    <div id="app_box">


    </div>

    <script src="/js/private/private.js"></script>
    <script>

            let socket = new SockJS("/room");
            socket.onopen = () => 
            {
                console.log("Info : connection opened");

                // 인증된 유저 리스트를 수신하겠다는 선언
                var subscribe = {
                    purpose : "subscribe",
                    target : "userList"
                };
                //socket.send(JSON.stringify(subscribe));

                // 내 친구리스트 수신하겠다는 선언
                subscribe = {
                    purpose : "subscribe",
                    target : "friendList"
                };
                socket.send(JSON.stringify(subscribe));
            };
            socket.onmessage = msgEvent;
            socket.onclose = () => console.log("Info : connection closed");
            socket.onerror = err => console.log(err);

            function msgEvent(message)
            {
                var data = message.data;
                console.log(data);
            }

    </script>

    </body>

</html>